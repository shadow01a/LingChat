好的，我已经根据你的要求，将教程从 `requirements.txt` 和 `pip` 迁移到使用 `uv` 和 `pyproject.toml`。

请看修改后的版本：

---

# LingChat 开发版 Windows 环境配置与使用指南

LingChat 几乎每天都在更新，但是很长时间才会发布一个 release 版本。如果你想抢先使用新功能，或者想为 LingChat 项目做贡献，但是自己不会写代码，我们也欢迎你体验最新的开发版并及时向我们汇报 Bug。

本篇文档将手把手教你如何在 Windows 电脑上，从零开始配置环境，运行 LingChat 最新的开发版代码。即使你完全不懂编程。

欢迎你，勇于探索的测试者！

![c5845cf9148b2620b2740c40d73cc8ab](https://github.com/user-attachments/assets/2815cca5-e037-477e-8d18-c1eb385c5deb)

## 零、准备工作：安装必备工具

在开始之前，我们需要在你的电脑上安装四个免费的代码开发工具。

### 1. 安装 Git

Git是一个代码版本管理工具，我们在这里用它链接GitHub，下载和更新GitHub中的源代码。

*   **下载地址**：[https://git-scm.com/download/win](https://git-scm.com/download/win)
*   **安装方法**：下载后，双击打开安装包，**一路点击 "Next"** 使用默认设置完成安装即可。

### 2. 安装 Python

Python 是 LingChat 使用的编程语言。

*   **下载地址**：[https://www.python.org/downloads/](https://www.python.org/downloads/)
*   **推荐版本**：建议下载[3.12.10](https://www.python.org/downloads/release/python-31210/)版本，LingChat是基于python 3.12.10 开发的。在这里选择适合你系统的安装包。
*   **安装方法**：
    1.  下载后，双击打开安装包。
    2.  **【非常重要！】** 在安装界面的最下方，**务必勾选 "Add Python to PATH"** 选项，然后再点击 "Install Now"。
    3.  等待安装完成即可。

### 3. 安装 uv

uv 是一个由 Ruff 团队开发的、非常快的 Python 包管理器，我们将用它来安装 LingChat 的运行依赖。

*   **安装方法**：
    1.  在 Windows 的开始菜单中，找到并打开 "PowerShell"（一个蓝色背景的窗口）。
    2.  在 PowerShell 窗口中，复制并粘贴以下命令，然后按回车键执行。
        ```powershell
        powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
        ```
    3.  安装完成后，关闭 PowerShell 窗口即可。

### 4. 安装 VS Code

VS Code是最主流的代码编辑器，界面现代，运行速度快，我们将用它来查看、管理和运行LingChat的源代码。

*   **下载地址**：[https://code.visualstudio.com/](https://code.visualstudio.com/)
*   **安装方法**：下载后，双击打开安装包。同样，使用默认设置，一路点击 "Next" 完成安装。

## 一、获取最新的源代码

准备工作完成后，我们开始获取 LingChat 的源代码。

1.  **创建项目文件夹**：在你的电脑上找到你想要的位置（比如 D 盘），创建一个新文件夹来存放源代码，我们以命名为 `MyProjects`为例。

2.  **打开命令行工具**：
    *   进入你刚刚创建的 `MyProjects` 文件夹。
    *   在文件夹窗口的地址栏里，输入 `cmd` 然后按回车键。这会弹出一个黑色的命令行窗口。

3.  **使用git命令下载代码**：在弹出的黑色窗口中，复制并粘贴以下命令，然后按回车键。
    ```bash
    git clone -b develop https://github.com/SlimeBoyOwO/LingChat.git
    ```
    *   `git clone` 是下载命令。
    *   `-b develop` 表示我们要下载 `develop` 分支（也就是最新的开发版）。

    当你看到命令行提示完成，并且 `MyProjects` 文件夹下出现了一个名为 `LingChat` 的新文件夹时，就说明代码已经成功下载到你的电脑里了！

## 二、使用 VS Code 配置和运行项目

### 2.1 初始化VSCode设置

现在，我们将使用 VS Code 来完成最后的配置和运行。

![打开vsc](https://raw.githubusercontent.com/SlimeBoyOwO/lingchat-docs/main/pic/打开vsc.png)

打开你安装好的vs code，如果不习惯英文界面，可以百度：“vscode如何设置中文”，将界面设置为中文。下面我们基于中文界面讲解。

![安装python扩展](https://raw.githubusercontent.com/SlimeBoyOwO/lingchat-docs/main/pic/安装python扩展.png)

LingChat是一个python项目，所以我们要给VS code安装Python插件。在左侧打开插件栏并搜索python，安装Python和Pylance，然后把软件重启即可。

### 2.2 使用VS Code 打开LingChat

在VS Code的左上角，找到"文件"选项，然后点击"打开文件夹..."(如果你使用的是英文界面，则是点击"File" -> "Open Folder...")，导航到刚刚下载的 `LingChat` 文件夹，然后点击 "选择文件夹"。现在你就成功的用VS Code打开了LingChat，在这之后，你可以在"文件"选项的“打开最近的文件”来快速找到LingChat。

### 2.3 创建并配置Python运行环境

现在，我们需要为 LingChat 创建一个隔离的、独立的 Python 运行环境并安装其所需的各种库。

1.  **打开终端**: 在 VS Code 的顶部菜单栏中，选择 "终端" -> "新建终端"。这会在 VS Code 的下方打开一个命令行面板。

2.  **创建虚拟环境**: 在打开的终端中，输入并执行以下命令，来创建一个名为 `.venv` 的虚拟环境。
    ```powershell
    python -m venv .venv
    ```

3.  **激活虚拟环境**: 继续在终端中执行以下命令来激活刚刚创建的环境。
    ```powershell
    .\.venv\Scripts\activate
    ```
    激活成功后，你会看到终端的提示符前面出现了 `(.venv)` 的字样。

4.  **安装项目依赖**: 项目的依赖项现在记录在 `pyproject.toml` 文件中。使用我们之前安装的 `uv` 工具，执行以下命令来安装所有依赖。
    ```powershell
    uv pip install -r pyproject.toml
    ```
    这个过程会根据你的网络情况花费几分钟到十几分钟不等，`uv` 的安装速度很快，请耐心等待。

5.  **选择解释器**: 按下 `Ctrl+Shift+P` 打开命令面板，输入 `Python: Select Interpreter`，然后选择带有 `('.venv': venv)` 标识的那个 Python 解释器。这会告诉 VS Code 使用我们创建的虚拟环境来运行代码。

现在，环境已配置完毕！
请在根目录新建一个文件，把他命名为.env，把.env.example，复制到.env中并保存。然后点击 VS Code 右上角的 "▶" (运行) 按钮来方便地启动 LingChat。

## 三、获取最新的更新

LingChat 几乎每天都在更新，你可以随时查看并使用最新的更新。

![更新](https://raw.githubusercontent.com/SlimeBoyOwO/lingchat-docs/main/pic/更新.png)

点击左侧的源代码管理按钮进入查看更新界面。点击虚线箭头（同步更改）刷新并拉取近期的更新。

**重要提示**：作为测试者，我们一般不修改本地代码。如果拉取更新时提示“冲突 (Conflict)”，最简单的解决方法是放弃所有本地修改。可以点击上图中的撤销箭头（放弃所有更改），将所有文件恢复到更新前的状态，然后再点击同步更改按钮拉取最新代码。如果你对某些文件（如人物设定）有自己的修改，请在执行此操作前手动备份。

## 四、纯命令行方式配置与使用 (Windows / Linux)

如果你习惯使用命令行，本章节将指导你如何完全通过命令行来完成所有配置和更新操作。

### 1. 安装核心工具
请确保你已根据【准备工作】章节安装了 `Git`, `Python` 和 `uv`。

### 2. 克隆与进入项目
首先，打开你的命令行终端（Windows上是`CMD`或`PowerShell`，Linux上是`Terminal`），然后执行以下命令。

```bash
# 克隆 develop 分支的源代码
git clone -b develop https://github.com/SlimeBoyOwO/LingChat.git

# 进入项目目录
cd LingChat```

### 3. 创建与激活虚拟环境
为了不污染你系统的全局 Python 环境，我们强烈建议为 LingChat 创建一个独立的虚拟环境。

```bash
# 创建一个名为 .venv 的虚拟环境
python -m venv .venv
```
环境创建成功后，需要激活它。激活命令在 Windows 和 Linux 上有所不同：

*   **在 Windows (CMD 或 PowerShell) 中激活：**
    ```powershell
    .\.venv\Scripts\activate
    ```
*   **在 Linux 或 macOS (Bash/Zsh) 中激活：**
    ```bash
    source .venv/bin/activate
    ```
激活成功后，你的命令行提示符前面会出现 `(.venv)` 字样。

### 4. 安装项目依赖
请确保你的虚拟环境已激活。然后运行以下命令来安装所有必需的 Python 库：
```bash
uv pip install -r pyproject.toml
```
这个过程会根据你的网络情况花费几分钟到十几分钟不等，请耐心等待。

### 5. 运行 LingChat
所有依赖安装完成后，请在根目录新建一个文件，把他命名为.env，把.env.example，复制到.env中并保存。然后执行以下命令即可启动 LingChat：
```bash
python main.py
```

### 6. 拉取最新的更新
当你想获取最新的开发版代码时，请在项目根目录（`LingChat` 文件夹内）执行以下命令。

```bash
# 步骤一：放弃所有本地修改，避免冲突（注意：会丢失你的本地改动，请做好备份）
git reset --hard origin/develop

# 步骤二：从 GitHub 拉取最新代码
git pull
```
**提示**：如果更新后 `pyproject.toml` 文件发生了变化，你需要再次运行 `uv pip install -r pyproject.toml` 来同步最新的依赖。

## 五、常见问题 (FAQ)

*   **Q: 输入 `git`, `python` 或 `uv` 命令时，提示“不是内部或外部命令...”？**
    A: 这说明对应的工具没有被正确安装，或者安装时没有成功添加到系统的 PATH 环境变量中。请回到【准备工作】章节，严格按照步骤重新安装对应的工具。对于 Python，**务必记得勾选 "Add Python to PATH" 选项**。

*   **Q: 运行 `python backend/window_main.py` 时报错 `ModuleNotFoundError: No module named 'xxxx'`？**
    A: 这个错误说明缺少某个库。通常有两个原因：
    1.  你忘记激活虚拟环境了。请检查终端提示符前面是否有 `(.venv)` 字样，如果没有，请先执行激活命令 (`.\.venv\Scripts\activate`)。
    2.  依赖没有被正确安装。请在**激活虚拟环境后**，重新运行 `uv pip install -r pyproject.toml` 命令来安装所有依赖。

*   **Q: `git pull` 更新代码时提示错误或冲突 (conflict) 怎么办？**
    A: 作为测试者，你本地的代码一般不需要修改。如果遇到冲突，最简单的办法是放弃本地的所有改动，强制和服务器保持一致。在终端执行以下命令：
    ```powershell
    git reset --hard origin/develop
    git pull
    ```
    **注意：这个命令会丢弃你可能在本地做的任何修改，请及时备份！** 对于只想体验最新版的用户来说，这是最直接有效的方法。

---

感谢你为 LingChat 做出的贡献！如果你在使用过程中发现了任何 Bug 或者有好的建议，欢迎随时向我们提 [Issue](https://github.com/SlimeBoyOwO/LingChat/issues)！